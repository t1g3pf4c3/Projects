<!DOCTYPE html>
<html lang="en">
<style>
.cell { height:40px;width:40px; font-size: 40px; background:white;}
.board { border: 1px black solid; display: inline-block;}
.row { display: flex;}
.black-cell   {background-color: #ff9340}
.white-cell   {background-color: #faeae6}
.cell:hover {filter: brightness(.78);box-shadow:inset 0px 0px 0px 1px #545454;}
.selected-cell{box-shadow:inset 0px 0px 0px 2px #000000 !important;}}
</style>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <script src="http://code.jquery.com/jquery-latest.min.js"></script> -->
</head>
<body>
<div class="board"> </div>
</body>
</html>
<script>

figobject = (i, x, y) => {
let figure ={
    icon:i,
    move_x:x,
    move_y:y
  }
  return figure
}
let null_field = [[figobject("♜", 1, 0).icon , " ♞", " ♝", " ♛", " ♚", " ♝","♜", " ♞" ],
["♟", "♟","♟","♟","♟","♟","♟","♟"], 
[""," "," "," "," "," "," "," "],
["","","","","","","",""],
["","","","","","","",""],
["","","","","","","",""],
["♙","♙","♙","♙","♙","♙","♙","♙"],
["♖","♘","♗","♕","♔","♗","♘","♖"]];
function createElementFromHTML(htmlString) {
  var div = document.createElement('div');
  div.innerHTML = htmlString.trim();
  return div.firstChild;
}

let chosenfig = [];
function cellClick(event)
{
	let cell = event.target;
  let figure = cell.textContent;

  let x = cell.getAttribute('x');
  let y = cell.getAttribute('y');
  console.log(x + " " + y);
  if(figure && !chosenfig[0]) {
    // console.log(figure?"sus" : 0);
    chosenfig.push(figure, x, y);
    cell.innerHTML="";
    console.log(chosenfig);
  }
  else if (chosenfig[0]) {

    // if(chosenfig[0]=="♙" && x == chosenfig[1]){
      cell.innerHTML = chosenfig[0];
    // }
    chosenfig = [];
  }
	[...document.querySelectorAll('.selected-cell')].forEach(elem => { elem.classList.remove('selected-cell')});
	cell.classList.add("selected-cell");

}
  document.addEventListener("DOMContentLoaded", function(event) {
    for(let i=0;i<8;i++)
	{
		let row = document.querySelector('.board').appendChild(createElementFromHTML("<div class='row' ></div>"));
		for(let e=0;e<8;e++)
		{
			if((e+i)%2==0) b = "black-cell";
			else b = "white-cell";

      let fig = null_field[i][e];
      let  cell = row.appendChild(createElementFromHTML(`<div x = ${e} y = ${i} class = "cell ${b}">${fig}</div>`));
			cell.addEventListener('click', cellClick);
		}
	}
  });

</script>
